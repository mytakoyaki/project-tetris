# ADR-015: ゲームモード別のスコア・実績・ランキング分離

## ステータス
承認済み

## 日付
2024-12-25

## 決定者
プロジェクトチーム

## 技術的決定
スコア・実績・ランキングはゲームモード別に分離して管理する。

## 背景
Tetrisアプリケーションでは、将来的に複数のゲームモード（マラソン、タイムアタック、チャレンジ、対戦等）を実装する予定がある。各モードで異なるルール・評価基準・プレイスタイルがあるため、データの分離管理が必要となる。

## 検討された選択肢

### 選択肢1: 統合管理
- **メリット**: データベース設計がシンプル、全体ランキングの実装が容易
- **デメリット**: モード間の比較が困難、モード固有の機能実装が複雑、将来的な拡張性が制限される

### 選択肢2: モード別分離（採用）
- **メリット**: モード固有の機能実装が容易、公平な比較が可能、将来的な拡張性が高い
- **デメリット**: データベース設計が複雑、全体統計の実装が複雑

## 決定理由
1. **公平性の確保**: 異なるルール・条件での比較を避け、公平なランキングを提供
2. **モード固有機能**: 各モードに特化した実績・統計・機能の実装が可能
3. **ユーザー体験**: モード別の進捗・実績管理により、ユーザーのモチベーション向上
4. **将来的な拡張性**: 新しいゲームモードの追加が容易
5. **データ分析**: モード別の詳細な分析・統計が可能

## 分離対象
- **スコア**: 各モードでのスコア・レベル・ライン数・時間等
- **実績**: モード固有の実績・バッジ・称号
- **ランキング**: モード別のリーダーボード・レーティング
- **統計**: モード別のプレイ回数・平均スコア・最高記録

## ゲームモード例
- **マラソン**: 150ラインクリアを目指す従来のTetris
- **タイムアタック**: 制限時間内でのスコア競争
- **チャレンジ**: 特殊ルール・ミッション付きモード
- **対戦**: オンライン対戦モード
- **スプリント**: 40ラインクリアの速さ競争

## 影響
- データベース設計が複雑になる
- API設計でモード指定が必要
- UI/UXでモード選択・切り替え機能が必要
- 全体統計の実装が複雑になる

## 実装方針
- スコアテーブルにgameModeフィールドを追加
- 実績テーブルにモード別の条件・進捗管理
- ランキングAPIでモード指定によるフィルタリング
- モード別の統計情報集計ロジック
- UIでのモード選択・切り替え機能 