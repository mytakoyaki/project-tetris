# ADR-010: オンライン対戦のログイン必須化

## ステータス
承認済み

## 日付
2024-12-25

## 決定者
プロジェクトチーム

## 技術的決定
オンライン対戦機能では、ユーザーログインを必須とする。

## 背景
オンライン対戦機能の実装において、ユーザー識別・対戦履歴管理・不正対策・レーティングシステムの実装が必要となる。

## 検討された選択肢

### 選択肢1: 匿名/ゲストプレイ許可
- **メリット**: ユーザーの心理的ハードルが低い、即座にプレイ可能
- **デメリット**: ユーザー識別が困難、対戦履歴管理が複雑、不正対策が困難、レーティングシステムの実装が困難

### 選択肢2: ログイン必須（採用）
- **メリット**: ユーザー識別が明確、対戦履歴管理が容易、不正対策が実装可能、レーティングシステムの実装が容易、フレンド機能の実装が容易
- **デメリット**: ユーザーの心理的ハードルが若干高い

## 決定理由
1. **セキュリティ・不正対策**: ログイン必須により、ユーザー識別が明確になり、不正行為の追跡・対策が可能
2. **対戦履歴管理**: ユーザーIDによる明確な対戦履歴の管理が可能
3. **レーティングシステム**: ユーザー識別により、ELO等のレーティングシステムの実装が容易
4. **フレンド機能**: 将来的なフレンド機能・プライベート対戦の実装が容易
5. **データ分析**: ユーザー別のプレイ統計・行動分析が可能

## 影響
- ユーザー登録・ログインフローが必須となる
- 対戦機能のUI/UX設計でログイン状態の確認が必要
- ゲストユーザー向けの説明・誘導が必要

## 実装方針
- 対戦機能へのアクセス時にログイン状態をチェック
- 未ログイン時はログイン画面にリダイレクト
- シングルプレイは引き続きゲストプレイ可能
- ログイン後の対戦機能へのスムーズな誘導を実装 