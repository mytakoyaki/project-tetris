# ğŸ”„ ClaudeTetris ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨ˆç”»

## ğŸ“‹ **ä½œæ¥­å…¨ä½“ã®æµã‚Œ**

### **Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆå®Œäº†æ¸ˆã¿ï¼‰**
- âœ… **Next.js 15 + React 19 ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
- âœ… **Material-UI + TypeScript çµ±åˆ**
- âœ… **Redux Toolkit çŠ¶æ…‹ç®¡ç†**
- âœ… **åŸºæœ¬çš„ãªã‚²ãƒ¼ãƒ æ©Ÿèƒ½å®Ÿè£…**

### **Phase 2: Rust + WASMçµ±åˆï¼ˆå®Œäº†æ¸ˆã¿ï¼‰**
- âœ… **rust-game-engineãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ**
- âœ… **WebAssemblyå¯¾å¿œè¨­å®š**
- âœ… **SRSå›è»¢ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…**
- âœ… **ã‚¹ãƒ”ãƒ³æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…**
- âœ… **WASMçµ±åˆå®Œäº†**

### **Phase 3: ã‚²ãƒ¼ãƒ æ©Ÿèƒ½æ‹¡å¼µï¼ˆå®Œäº†æ¸ˆã¿ï¼‰**
- âœ… **ãƒ•ã‚£ãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰å®Ÿè£…**
- âœ… **å®Ÿç¸¾ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…**
- âœ… **ãƒã‚¤ãƒ³ãƒˆäº¤æ›ã‚·ã‚¹ãƒ†ãƒ **
- âœ… **ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚·ã‚¹ãƒ†ãƒ **

### **Phase 4: ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯æ©Ÿèƒ½å®Ÿè£…ï¼ˆé€²è¡Œä¸­ï¼‰**
- âœ… **Next.js API Routeså®Ÿè£…**
- âœ… **JWTèªè¨¼ã‚·ã‚¹ãƒ†ãƒ **
- âœ… **å‹å®‰å…¨ãªAPIé€šä¿¡**
- ğŸ”„ **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆï¼ˆPhase 4Bï¼‰**
- â³ **Clerkèªè¨¼ç§»è¡Œï¼ˆPhase 5ï¼‰**

### **Phase 5: èªè¨¼ãƒ»UIæ”¹å–„ï¼ˆäºˆå®šï¼‰**
- â³ **Clerkèªè¨¼ã‚·ã‚¹ãƒ†ãƒ å°å…¥**
- â³ **SNSãƒ­ã‚°ã‚¤ãƒ³çµ±åˆ**
- â³ **èªè¨¼UIæ”¹å–„**
- â³ **æ®µéšçš„JWTç§»è¡Œ**

### **Phase 6: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ï¼ˆäºˆå®šï¼‰**
- â³ **Socket.ioçµ±åˆ**
- â³ **ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼**
- â³ **ãƒãƒƒãƒãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ **
- â³ **ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½**

### **Phase 7: é«˜åº¦ãªæ©Ÿèƒ½ï¼ˆäºˆå®šï¼‰**
- â³ **ãƒªãƒ—ãƒ¬ã‚¤ã‚·ã‚¹ãƒ†ãƒ **
- â³ **ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½**
- â³ **ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ**
- â³ **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**

---

## ğŸ¯ **è©³ç´°ç§»è¡Œè¨ˆç”»**

### **Phase 4B: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆï¼ˆç¾åœ¨é€²è¡Œä¸­ï¼‰**

#### **Step 1: Prismaè¨­å®šãƒ»ã‚¹ã‚­ãƒ¼ãƒå®šç¾©**
```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install @prisma/client
npm install -D prisma

# PrismaåˆæœŸåŒ–
npx prisma init

# ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
# prisma/schema.prisma
```

#### **Step 2: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒæ§‹ç¯‰**
```bash
# Docker Composeè¨­å®š
# docker-compose.yml
version: '3.8'
services:
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: tetris_dev
      POSTGRES_USER: tetris_user
      POSTGRES_PASSWORD: tetris_password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
```

#### **Step 3: APIçµ±åˆ**
```typescript
// lib/prisma.ts
import { PrismaClient } from '../generated/prisma';

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined;
};

export const prisma = globalForPrisma.prisma ?? new PrismaClient();

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;
```

#### **Step 4: æ—¢å­˜API Routesæ›´æ–°**
```typescript
// app/api/scores/route.ts
import { prisma } from '@/lib/prisma';

export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const userId = searchParams.get('userId');
    const gameMode = searchParams.get('gameMode');
    const limit = parseInt(searchParams.get('limit') || '10');
    const offset = parseInt(searchParams.get('offset') || '0');

    const where = {
      ...(userId && { userId }),
      ...(gameMode && { gameMode }),
    };

    const [scores, total] = await Promise.all([
      prisma.score.findMany({
        where,
        orderBy: { score: 'desc' },
        take: limit,
        skip: offset,
        include: {
          user: {
            select: { username: true }
          }
        }
      }),
      prisma.score.count({ where })
    ]);

    return NextResponse.json({
      scores,
      total,
      hasMore: offset + limit < total
    });
  } catch (error) {
    return NextResponse.json(
      { error: 'Failed to fetch scores' },
      { status: 500 }
    );
  }
}
```

### **Phase 4C: RTK Queryçµ±åˆ**

#### **Step 1: RTK Queryè¨­å®š**
```typescript
// store/api.ts
import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';

export const api = createApi({
  reducerPath: 'api',
  baseQuery: fetchBaseQuery({ 
    baseUrl: '/api',
    credentials: 'include',
  }),
  tagTypes: ['User', 'Score', 'Achievement', 'Ranking'],
  endpoints: (builder) => ({
    getScores: builder.query({
      query: (params) => ({
        url: '/scores',
        params,
      }),
      providesTags: ['Score'],
    }),
    submitScore: builder.mutation({
      query: (score) => ({
        url: '/scores',
        method: 'POST',
        body: score,
      }),
      invalidatesTags: ['Score', 'Ranking'],
    }),
  }),
});
```

#### **Step 2: ã‚¹ãƒˆã‚¢çµ±åˆ**
```typescript
// store/store.ts
import { configureStore } from '@reduxjs/toolkit';
import { setupListeners } from '@reduxjs/toolkit/query';
import { api } from './api';

export const store = configureStore({
  reducer: {
    [api.reducerPath]: api.reducer,
    game: gameReducer,
    user: userReducer,
    score: scoreReducer,
    achievement: achievementReducer,
  },
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware().concat(api.middleware),
});

setupListeners(store.dispatch);
```

### **Phase 4D: æœ¬ç•ªç’°å¢ƒæº–å‚™**

#### **Step 1: AWS RDSè¨­å®š**
- PostgreSQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—è¨­å®š
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®š

#### **Step 2: Upstash Redisè¨­å®š**
- Redisã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
- æ¥ç¶šè¨­å®š
- ç›£è¦–è¨­å®š

#### **Step 3: ç’°å¢ƒå¤‰æ•°ç®¡ç†**
```bash
# .env.local
DATABASE_URL="postgresql://username:password@localhost:5432/tetris_dev"
REDIS_URL="redis://localhost:6379"

# .env.production
DATABASE_URL="postgresql://username:password@aws-rds-endpoint:5432/tetris_prod"
REDIS_URL="redis://upstash-redis-endpoint:6379"
```

---

## ğŸ¯ **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯æ¦‚è¦**

### **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 15 (App Router)
- **UI**: React 19 + Material-UI (MUI)
- **çŠ¶æ…‹ç®¡ç†**: Redux Toolkit + RTK Query
- **è¨€èª**: TypeScript
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS + Emotion

### **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**
- **API**: Next.js API Routes
- **ORM**: Prisma
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL (AWS RDS)
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: Redis (Upstash)
- **èªè¨¼**: Clerk (Phase 5)
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡**: Socket.io (Phase 6)

### **ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³**
- **è¨€èª**: Rust
- **å®Ÿè¡Œç’°å¢ƒ**: WebAssembly (WASM)
- **æ©Ÿèƒ½**: SRSå›è»¢ã‚·ã‚¹ãƒ†ãƒ ã€ã‚¹ãƒ”ãƒ³æ¤œå‡ºã€è¡çªåˆ¤å®š

### **ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤**
- **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°**: Vercel
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: AWS RDS
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: Upstash Redis
- **èªè¨¼**: Clerk
- **CI/CD**: GitHub Actions

---

## ğŸ“Š **ç§»è¡Œé€²æ—ç®¡ç†**

### **å®Œäº†æ¸ˆã¿ï¼ˆâœ…ï¼‰**
- [x] Next.js 15 + React 19 ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [x] Material-UI + TypeScript çµ±åˆ
- [x] Redux Toolkit çŠ¶æ…‹ç®¡ç†
- [x] åŸºæœ¬çš„ãªã‚²ãƒ¼ãƒ æ©Ÿèƒ½å®Ÿè£…
- [x] rust-game-engineãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- [x] WebAssemblyå¯¾å¿œè¨­å®š
- [x] SRSå›è»¢ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- [x] ã‚¹ãƒ”ãƒ³æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- [x] WASMçµ±åˆå®Œäº†
- [x] ãƒ•ã‚£ãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰å®Ÿè£…
- [x] å®Ÿç¸¾ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- [x] ãƒã‚¤ãƒ³ãƒˆäº¤æ›ã‚·ã‚¹ãƒ†ãƒ 
- [x] ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚·ã‚¹ãƒ†ãƒ 
- [x] Next.js API Routeså®Ÿè£…
- [x] JWTèªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- [x] å‹å®‰å…¨ãªAPIé€šä¿¡

### **é€²è¡Œä¸­ï¼ˆğŸ”„ï¼‰**
- [ ] Prismaè¨­å®šãƒ»ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
- [ ] ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ï¼ˆDockerï¼‰
- [ ] APIçµ±åˆï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰
- [ ] RTK Queryçµ±åˆ

### **æœªç€æ‰‹ï¼ˆâ³ï¼‰**
- [ ] æœ¬ç•ªç’°å¢ƒæº–å‚™ï¼ˆAWS RDS + Upstash Redisï¼‰
- [ ] Clerkèªè¨¼ã‚·ã‚¹ãƒ†ãƒ å°å…¥
- [ ] SNSãƒ­ã‚°ã‚¤ãƒ³çµ±åˆ
- [ ] Socket.ioçµ±åˆ
- [ ] ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ©Ÿèƒ½
- [ ] ãƒãƒƒãƒãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 
- [ ] ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
- [ ] ãƒªãƒ—ãƒ¬ã‚¤ã‚·ã‚¹ãƒ†ãƒ 
- [ ] ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
- [ ] ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

---

## ğŸš€ **æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**

### **Phase 4B: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆï¼ˆç¾åœ¨é€²è¡Œä¸­ï¼‰**
1. **Prismaè¨­å®šãƒ»ã‚¹ã‚­ãƒ¼ãƒå®šç¾©**
   - PrismaåˆæœŸåŒ–
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ
   - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ

2. **ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒæ§‹ç¯‰**
   - Docker Composeè¨­å®š
   - PostgreSQL + Redisèµ·å‹•
   - æ¥ç¶šç¢ºèª

3. **APIçµ±åˆ**
   - æ—¢å­˜API Routesæ›´æ–°
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

4. **RTK Queryçµ±åˆ**
   - APIå®šç¾©ä½œæˆ
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥è¨­å®š
   - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰çµ±åˆ

### **Phase 5: Clerkèªè¨¼ç§»è¡Œï¼ˆäºˆå®šï¼‰**
1. **Clerkãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š**
2. **èªè¨¼UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…**
3. **SNSãƒ­ã‚°ã‚¤ãƒ³çµ±åˆ**
4. **æ®µéšçš„JWTç§»è¡Œ**

### **Phase 6: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ï¼ˆäºˆå®šï¼‰**
1. **Socket.ioçµ±åˆ**
2. **ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ æ©Ÿèƒ½**
3. **ãƒãƒƒãƒãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ **
4. **ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½**

---

## ğŸ› ï¸ **é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

### **å‰ææ¡ä»¶**
```bash
# Node.js 20ä»¥ä¸Š
node --version

# Docker & Docker Compose
docker --version
docker-compose --version

# Rust (WASMç”¨)
rustc --version
wasm-pack --version
```

### **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç’°å¢ƒ**
```bash
# PostgreSQL + Redis èµ·å‹•
cd modern-tetris
docker-compose up -d

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šç¢ºèª
psql -h localhost -U tetris_user -d tetris_dev
redis-cli ping
```

### **Prismaè¨­å®š**
```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install @prisma/client
npm install -D prisma

# PrismaåˆæœŸåŒ–
npx prisma init

# ã‚¹ã‚­ãƒ¼ãƒç”Ÿæˆ
npx prisma generate

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
npx prisma migrate dev --name init

# Prisma Studioèµ·å‹•
npx prisma studio
```

### **Next.jsç’°å¢ƒ**
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•
cd modern-tetris

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test
```

### **Rust WASMç’°å¢ƒ**
```bash
# Rustã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ãƒ“ãƒ«ãƒ‰
cd rust-game-engine
./build.sh

# WASMãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
ls -la public/wasm/
```

## ğŸ”§ **ç’°å¢ƒå¤‰æ•°è¨­å®š**

### **é–‹ç™ºç’°å¢ƒ (.env.local)**
```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
DATABASE_URL="postgresql://tetris_user:tetris_password@localhost:5432/tetris_dev"
REDIS_URL="redis://localhost:6379"

# èªè¨¼
JWT_SECRET="your-secret-key"
NEXTAUTH_SECRET="your-nextauth-secret"

# Clerk (Phase 5ã§ä½¿ç”¨)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="your-clerk-key"
CLERK_SECRET_KEY="your-clerk-secret"
```

### **æœ¬ç•ªç’°å¢ƒ (.env.production)**
```bash
# AWS RDS
DATABASE_URL="postgresql://username:password@aws-rds-endpoint:5432/tetris_prod"

# Upstash Redis
REDIS_URL="redis://upstash-redis-endpoint:6379"

# Clerk
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="your-clerk-key"
CLERK_SECRET_KEY="your-clerk-secret"
```

### **çµ±åˆãƒ†ã‚¹ãƒˆ**
```bash
# Rust ãƒ†ã‚¹ãƒˆ
cd rust-game-engine
cargo test

# WebAssembly ãƒ†ã‚¹ãƒˆ
wasm-pack test --headless --firefox

# Next.js ãƒ†ã‚¹ãƒˆ
cd ../modern-tetris
npm test
```

---

## ğŸš€ **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™**

### **ç§»è¡Œå‰ï¼ˆTypeScriptï¼‰**
- **FPS**: 30-45 FPS
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: 100-150MB
- **åˆæœŸåŒ–æ™‚é–“**: 3-5ç§’
- **å…¥åŠ›é…å»¶**: 50-100ms

### **ç§»è¡Œå¾Œï¼ˆRust + WebAssemblyï¼‰**
- **FPS**: 60 FPSï¼ˆå®‰å®šï¼‰
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: 30-50MB
- **åˆæœŸåŒ–æ™‚é–“**: 1-2ç§’
- **å…¥åŠ›é…å»¶**: <16ms

### **æ”¹å–„ç‡**
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: 2-3å€å‘ä¸Š
- **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**: 60-70%å‰Šæ¸›
- **åˆæœŸåŒ–é€Ÿåº¦**: 2-3å€é«˜é€ŸåŒ–
- **å¿œç­”æ€§**: 3-6å€æ”¹å–„

---

## ğŸ”§ **å“è³ªä¿è¨¼**

### **ãƒ†ã‚¹ãƒˆæˆ¦ç•¥**
1. **å˜ä½“ãƒ†ã‚¹ãƒˆ**: å„Rustãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å€‹åˆ¥ãƒ†ã‚¹ãƒˆ
2. **çµ±åˆãƒ†ã‚¹ãƒˆ**: WebAssemblyã¨Next.jsã®çµ±åˆãƒ†ã‚¹ãƒˆ
3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**: ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ¸¬å®š
4. **E2Eãƒ†ã‚¹ãƒˆ**: ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®å‹•ä½œç¢ºèª

### **ã‚³ãƒ¼ãƒ‰å“è³ª**
1. **å‹å®‰å…¨æ€§**: 100% TypeScript + Rustå‹ãƒã‚§ãƒƒã‚¯
2. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: åŒ…æ‹¬çš„ãªã‚¨ãƒ©ãƒ¼å‡¦ç†
3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: è©³ç´°ãªAPIä»•æ§˜æ›¸
4. **ã‚³ãƒ¡ãƒ³ãƒˆ**: è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã®èª¬æ˜

---

## ğŸ“ˆ **ãƒªã‚¹ã‚¯ç®¡ç†**

### **æŠ€è¡“çš„ãƒªã‚¹ã‚¯**
- **WebAssemblyå¯¾å¿œ**: ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ã®å•é¡Œ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: æœŸå¾…é€šã‚Šã®æ”¹å–„ãŒå¾—ã‚‰ã‚Œãªã„å¯èƒ½æ€§
- **çµ±åˆ**: Rustã¨TypeScriptã®é€£æºå•é¡Œ

### **å¯¾ç­–**
- **æ®µéšçš„ç§»è¡Œ**: æ©Ÿèƒ½ã”ã¨ã«é †æ¬¡ç§»è¡Œ
- **ãƒ†ã‚¹ãƒˆé§†å‹•**: å„æ®µéšã§ã®å‹•ä½œç¢ºèª
- **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: å•é¡Œç™ºç”Ÿæ™‚ã®ä»£æ›¿æ¡ˆæº–å‚™

---

## ğŸ¯ **æˆåŠŸæŒ‡æ¨™**

### **æŠ€è¡“æŒ‡æ¨™**
- [ ] 60FPSã§ã®å®‰å®šå‹•ä½œ
- [ ] ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡50MBä»¥ä¸‹
- [ ] åˆæœŸåŒ–æ™‚é–“2ç§’ä»¥ä¸‹
- [ ] å…¥åŠ›é…å»¶16msä»¥ä¸‹

### **å“è³ªæŒ‡æ¨™**
- [ ] ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š
- [ ] å‹å®‰å…¨æ€§100%
- [ ] ã‚¨ãƒ©ãƒ¼ç‡0.1%ä»¥ä¸‹
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š

### **é–‹ç™ºåŠ¹ç‡æŒ‡æ¨™**
- [ ] ãƒ“ãƒ«ãƒ‰æ™‚é–“30ç§’ä»¥ä¸‹
- [ ] ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰1ç§’ä»¥ä¸‹
- [ ] ãƒ‡ãƒãƒƒã‚°æ™‚é–“50%å‰Šæ¸›
- [ ] ã‚³ãƒ¼ãƒ‰ä¿å®ˆæ€§å‘ä¸Š

ã“ã®ç§»è¡Œè¨ˆç”»ã«ã‚ˆã‚Šã€**æœ€é«˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**ã¨**é–‹ç™ºåŠ¹ç‡**ã‚’ä¸¡ç«‹ã—ãŸãƒ¢ãƒ€ãƒ³ãªãƒ†ãƒˆãƒªã‚¹ã‚²ãƒ¼ãƒ ãŒå®Œæˆã—ã¾ã™ã€‚

# ãƒ¢ãƒ€ãƒ³ãƒ†ãƒˆãƒªã‚¹ Rustç§»è¡Œãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆPhase3ä»¥é™ãƒ»2024-06-27æ™‚ç‚¹ï¼‰

---

## Phase3: SRSãƒ»ã‚¹ãƒ”ãƒ³åˆ¤å®šãƒ»ã‚¹ã‚³ã‚¢è¨ˆç®—ã®Rustå®Ÿè£…

### ç›®æ¨™
- SRSï¼ˆSuper Rotation Systemï¼‰å›è»¢ãƒ»ã‚­ãƒƒã‚¯ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»å£è¹´ã‚Šå‡¦ç†ã‚’Rustå´ã«ç§»æ¤
- T-Spin/SZ-Spin/I-Spin/JL-Spinç­‰ã®ã‚¹ãƒ”ãƒ³åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’Rustå´ã«å®Ÿè£…
- ã‚¹ã‚³ã‚¢è¨ˆç®—ãƒ»ãƒ©ã‚¤ãƒ³æ¶ˆå»ãƒ»Back-to-Back/Comboç­‰ã®åˆ¤å®šã‚‚Rustå´ã«çµ±åˆ

### ä¸»ãªä½œæ¥­
- `modern-tetris/src/features/game/utils/srs.ts`ãƒ»`spinDetection.ts`ã®Rustç§»æ¤
- Rustã‚¨ãƒ³ã‚¸ãƒ³APIï¼ˆrotate_tetromino, move_tetrominoç­‰ï¼‰ã§SRSãƒ»ã‚¹ãƒ”ãƒ³åˆ¤å®šã‚’è¿”å´
- ã‚¹ã‚³ã‚¢ãƒ»ãƒ©ã‚¤ãƒ³æ¶ˆå»ãƒ»B2B/Comboç®¡ç†ã®Rustå®Ÿè£…
- WASM/JSå‹å¤‰æ›ãƒ»Redux/Reacté€£æºã®æ‹¡å¼µ

### æˆæœç‰©
- Rustã‚¨ãƒ³ã‚¸ãƒ³ã§SRSå›è»¢ãƒ»ã‚¹ãƒ”ãƒ³åˆ¤å®šãƒ»ã‚¹ã‚³ã‚¢è¨ˆç®—ãŒå®Œçµ
- UI/Reduxã¯Rustã‚¨ãƒ³ã‚¸ãƒ³ã®çµæœã‚’æç”»ãƒ»ç®¡ç†ã™ã‚‹ã®ã¿

---

## Phase3 SRSãƒ»ã‚¹ãƒ”ãƒ³åˆ¤å®š å·®åˆ†èª¿æŸ»ãƒ»å®Ÿè£…æ–¹é‡ï¼ˆ2024-06-27è¿½è¨˜ï¼‰

### å…¬å¼SRSä»•æ§˜ã¨ç¾å®Ÿè£…ã®ä¸»ãªå·®åˆ†
- å›è»¢ä¸­å¿ƒãƒ»ã‚­ãƒƒã‚¯ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå…¬å¼ã¨ç•°ãªã‚‹å ´åˆã‚ã‚Šï¼ˆç‰¹ã«I/OãƒŸãƒï¼‰
- ãƒ†ãƒˆãƒªãƒŸãƒå½¢çŠ¶ãƒ»å›è»¢ã”ã¨ã®ãƒ–ãƒ­ãƒƒã‚¯é…ç½®ãŒå…¬å¼ã¨ã‚ºãƒ¬ã¦ã„ã‚‹å ´åˆã‚ã‚Š
- SRSå›è»¢ãƒ»å£è¹´ã‚Šå‡¦ç†ãŒä¸€éƒ¨ç°¡ç•¥åŒ–ãƒ»æœªå¯¾å¿œ
- T-Spinåˆ¤å®šã®ä¸­å¿ƒãƒ»è§’ãƒ»wallkickå®šç¾©ãŒå…¬å¼ã¨ç•°ãªã‚‹å ´åˆã‚ã‚Š
- ãƒ†ã‚¹ãƒˆç¶²ç¾…æ€§ãŒä¸ååˆ†ï¼ˆå…¨ãƒŸãƒç¨®ãƒ»å…¨å›è»¢ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ»å£éš›/åºŠéš›/ãƒ–ãƒ­ãƒƒã‚¯éš£æ¥æ™‚ã®æŒ™å‹•ï¼‰

### æ­£ã—ã„å®Ÿè£…æ‰‹é †ï¼ˆTTCã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³æº–æ‹ ï¼‰
1. å…¬å¼SRSãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»å›è»¢ä¸­å¿ƒã®å®šç¾©ï¼ˆå…¨ãƒŸãƒç¨®ãƒ»å…¨å›è»¢ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
2. ãƒ†ãƒˆãƒªãƒŸãƒå½¢çŠ¶ãƒ»å›è»¢ã”ã¨ã®ãƒ–ãƒ­ãƒƒã‚¯é…ç½®ãƒ†ãƒ¼ãƒ–ãƒ«ã®å®šç¾©
3. SRSå›è»¢å‡¦ç†ã®å…¬å¼æº–æ‹ å®Ÿè£…ï¼ˆkick offseté †è©¦è¡Œãƒ»wallkickæƒ…å ±è¿”å´ï¼‰
4. fix_tetrominoã§4ãƒã‚¹ã™ã¹ã¦ã‚’ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«åŸ‹ã‚è¾¼ã‚€
5. T-Spinåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã®å…¬å¼æº–æ‹ åŒ–ï¼ˆä¸­å¿ƒãƒ»è§’ãƒ»wallkickãƒ»Miniåˆ†å²ï¼‰
6. å…¨ãƒŸãƒç¨®ãƒ»å…¨å›è»¢ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¿½åŠ 

### ä»Šå¾Œã®æ–¹é‡
- å…¬å¼SRS/T-Spinä»•æ§˜ã‚’å³å¯†ã«å†ç¾ã™ã‚‹è¨­è¨ˆãƒ»å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆã‚’æ¨é€²
- JS/Rustã¨ã‚‚ã«å…¬å¼ä»•æ§˜ã¨ã®å·®åˆ†ã‚’æ„è­˜ã—ã€æ®µéšçš„ã«ä¿®æ­£ãƒ»ç§»æ¤
- å‚è€ƒ: [Tetris Guideline SRS](https://tetris.wiki/SRS), [T-Spinåˆ¤å®šä»•æ§˜](https://tetris.wiki/T-Spin)

---

## Phase4: ã‚²ãƒ¼ãƒ é€²è¡Œãƒ»ãƒªãƒ—ãƒ¬ã‚¤ãƒ»å®Ÿç¸¾ãƒ»æ°¸ç¶šåŒ–

### ç›®æ¨™
- ã‚²ãƒ¼ãƒ é€²è¡Œï¼ˆè‡ªå‹•è½ä¸‹ãƒ»æ–°è¦ãƒ†ãƒˆãƒªãƒŸãƒç”Ÿæˆãƒ»ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼åˆ¤å®šç­‰ï¼‰ã‚’Rustå´ã§ä¸€å…ƒç®¡ç†
- ãƒªãƒ—ãƒ¬ã‚¤ä¿å­˜ãƒ»å†ç”Ÿã€å®Ÿç¸¾åˆ¤å®šã€ã‚¹ã‚³ã‚¢/å®Ÿç¸¾/çµ±è¨ˆã®æ°¸ç¶šåŒ–
- é«˜é€ŸåŒ–ãƒ»ãƒã‚°ä¿®æ­£ãƒ»ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–

### ä¸»ãªä½œæ¥­
- Rustã‚¨ãƒ³ã‚¸ãƒ³ã«ã‚²ãƒ¼ãƒ é€²è¡Œç®¡ç†APIï¼ˆtick, step, reset, is_game_overç­‰ï¼‰ã‚’è¿½åŠ 
- ãƒªãƒ—ãƒ¬ã‚¤ãƒ‡ãƒ¼ã‚¿ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º/ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºè¨­è¨ˆ
- å®Ÿç¸¾åˆ¤å®šãƒ»çµ±è¨ˆé›†è¨ˆã®Rustå®Ÿè£…
- WASM/JSé–“ã®ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ãƒ»ãƒ­ãƒ¼ãƒ‰/ã‚»ãƒ¼ãƒ–APIè¨­è¨ˆ
- E2Eãƒ†ã‚¹ãƒˆãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### æˆæœç‰©
- ã‚²ãƒ¼ãƒ é€²è¡Œãƒ»ãƒªãƒ—ãƒ¬ã‚¤ãƒ»å®Ÿç¸¾ãƒ»çµ±è¨ˆãŒRustã‚¨ãƒ³ã‚¸ãƒ³ã§ä¸€å…ƒç®¡ç†
- UI/Reduxã¯çŠ¶æ…‹è¡¨ç¤ºãƒ»æ“ä½œå…¥åŠ›ã®ã¿

---

## Phase5: UI/UXæœ€é©åŒ–ãƒ»ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å±•é–‹

### ç›®æ¨™
- UI/UXã®æœ€é©åŒ–ãƒ»ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å‘ä¸Šãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
- WASMã‚¨ãƒ³ã‚¸ãƒ³ã®Webä»¥å¤–ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—/ãƒ¢ãƒã‚¤ãƒ«/ãƒã‚¤ãƒ†ã‚£ãƒ–ï¼‰å±•é–‹åŸºç›¤æ•´å‚™
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ»æ‹¡å¼µæ€§ãƒ»OSSåŒ–æ¨é€²

### ä¸»ãªä½œæ¥­
- UI/UXæ”¹å–„ãƒ»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ
- WASMãƒã‚¤ãƒŠãƒªã®æœ€é©åŒ–ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
- Electron/React Nativeç­‰ã¸ã®å±•é–‹æ¤œè¨¼
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ»ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆä½“åˆ¶æ•´å‚™

### æˆæœç‰©
- é«˜å“è³ªãªUI/UXãƒ»å¤šæ§˜ãªãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
- OSS/ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å±•é–‹å¯èƒ½ãªãƒ¢ãƒ€ãƒ³ãƒ†ãƒˆãƒªã‚¹åŸºç›¤

---

## è£œè¶³
- å„Phaseã¯æ®µéšçš„ã«PRãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ãƒ†ã‚¹ãƒˆã‚’æ•´å‚™ã—ã¤ã¤é€²è¡Œ
- æ—¢å­˜JSå®Ÿè£…ã®çŸ¥è¦‹ã‚’æ´»ã‹ã—ã¤ã¤ã€Rustå´ã«æ®µéšçš„ã«ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç§»ç®¡
- é€²æ—ãƒ»æˆæœã¯`doc/files/phaseX.md`ãƒ»`log/rust-migration/`ç­‰ã«éšæ™‚è¨˜éŒ² 