# ğŸ”„ ClaudeTetris ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨ˆç”»ï¼ˆ2024-12-25æ›´æ–°ãƒ»Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å„ªå…ˆï¼‰

## ğŸ“‹ **ä½œæ¥­å…¨ä½“ã®æµã‚Œ**

### **Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆå®Œäº†æ¸ˆã¿ï¼‰**
- âœ… **Next.js 15 + React 19 ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
- âœ… **Material-UI + TypeScript çµ±åˆ**
- âœ… **Redux Toolkit çŠ¶æ…‹ç®¡ç†**
- âœ… **åŸºæœ¬çš„ãªã‚²ãƒ¼ãƒ æ©Ÿèƒ½å®Ÿè£…**

### **Phase 2: Rust + WASMçµ±åˆï¼ˆå®Œäº†æ¸ˆã¿ï¼‰**
- âœ… **rust-game-engineãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ**
- âœ… **WebAssemblyå¯¾å¿œè¨­å®š**
- âœ… **SRSå›è»¢ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…**
- âœ… **ã‚¹ãƒ”ãƒ³æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…**
- âœ… **WASMçµ±åˆå®Œäº†**

### **Phase 3: ã‚²ãƒ¼ãƒ æ©Ÿèƒ½æ‹¡å¼µï¼ˆå®Œäº†æ¸ˆã¿ï¼‰**
- âœ… **ãƒ•ã‚£ãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰å®Ÿè£…**
- âœ… **å®Ÿç¸¾ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…**
- âœ… **ãƒã‚¤ãƒ³ãƒˆäº¤æ›ã‚·ã‚¹ãƒ†ãƒ **
- âœ… **ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚·ã‚¹ãƒ†ãƒ **

### **Phase 4: Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ§‹ç¯‰ï¼ˆé€²è¡Œä¸­ï¼‰**
- âœ… **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆï¼ˆPhase 4Bï¼‰**
  - âœ… **Dockerç’°å¢ƒæ§‹ç¯‰ï¼ˆPostgreSQL + Redisï¼‰**
  - âœ… **Prismaã‚¹ã‚­ãƒ¼ãƒå®šç¾©ãƒ»é©ç”¨**
  - âœ… **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ï¼ˆSeedï¼‰**
- ğŸ”„ **Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤æ§‹ç¯‰ï¼ˆPhase 4Cï¼‰**
  - â³ **Rust Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯é¸å®šãƒ»è¨­å®š**
  - â³ **ORMè¨­å®šï¼ˆDiesel/SeaORMï¼‰**
  - â³ **åŸºæœ¬çš„ãªAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…**
- â³ **èªè¨¼ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…ï¼ˆPhase 4Dï¼‰**
  - â³ **JWTèªè¨¼ã®Rustå®Ÿè£…**
  - â³ **Clerké€£æºã®å®Ÿè£…**
  - â³ **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**

### **Phase 5: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰çµ±åˆï¼ˆäºˆå®šï¼‰**
- â³ **APIé€šä¿¡å®Ÿè£…**
- â³ **RTK Queryçµ±åˆ**
- â³ **å‹å®‰å…¨æ€§ç¢ºä¿**
- â³ **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**

### **Phase 6: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ï¼ˆäºˆå®šï¼‰**
- â³ **WebSocket/Socket.ioå®Ÿè£…**
- â³ **ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼**
- â³ **ãƒãƒƒãƒãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ **
- â³ **ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½**

### **Phase 7: é«˜åº¦ãªæ©Ÿèƒ½ï¼ˆäºˆå®šï¼‰**
- â³ **ãƒªãƒ—ãƒ¬ã‚¤ã‚·ã‚¹ãƒ†ãƒ **
- â³ **ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½**
- â³ **ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ**
- â³ **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**

---

## ğŸ¯ **è©³ç´°ç§»è¡Œè¨ˆç”»**

### **Phase 4C: Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤æ§‹ç¯‰ï¼ˆç¾åœ¨é€²è¡Œä¸­ï¼‰**

#### **Step 1: Rustãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ**
```bash
# Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
cd ..
cargo new rust-backend
cd rust-backend

# ä¾å­˜é–¢ä¿‚è¨­å®š
# Cargo.toml
[dependencies]
axum = "0.7"
tokio = { version = "1.0", features = ["full"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
diesel = { version = "2.1", features = ["postgres", "chrono"] }
diesel_migrations = "2.1"
jsonwebtoken = "9.2"
redis = { version = "0.24", features = ["tokio-comp"] }
tower-http = { version = "0.5", features = ["cors"] }
tracing = "0.1"
tracing-subscriber = "0.3"
```

#### **Step 2: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ **
```
rust-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs              # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ api/                 # APIãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ users.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ scores.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ achievements.rs
â”‚   â”‚   â”‚   â””â”€â”€ auth.rs
â”‚   â”‚   â”œâ”€â”€ models/              # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ user.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ score.rs
â”‚   â”‚   â”‚   â””â”€â”€ achievement.rs
â”‚   â”‚   â”œâ”€â”€ services/            # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_service.rs
â”‚   â”‚   â”‚   â””â”€â”€ game_service.rs
â”‚   â”‚   â”œâ”€â”€ db/                  # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â””â”€â”€ connection.rs
â”‚   â”‚   â””â”€â”€ config/              # è¨­å®š
â”‚   â”‚       â”œâ”€â”€ mod.rs
â”‚   â”‚       â””â”€â”€ app_config.rs
â”‚   â”œâ”€â”€ migrations/              # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â””â”€â”€ .env
```

#### **Step 3: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ»ORMè¨­å®š**
```rust
// src/db/connection.rs
use diesel::pg::PgConnection;
use diesel::r2d2::{self, ConnectionManager};
use std::env;

pub type Pool = r2d2::Pool<ConnectionManager<PgConnection>>;

pub fn establish_connection() -> Pool {
    let database_url = env::var("DATABASE_URL")
        .expect("DATABASE_URL must be set");
    
    let manager = ConnectionManager::<PgConnection>::new(database_url);
    r2d2::Pool::builder()
        .build(manager)
        .expect("Failed to create pool")
}
```

#### **Step 4: åŸºæœ¬çš„ãªAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…**
```rust
// src/api/users.rs
use axum::{
    extract::{Path, State},
    http::StatusCode,
    Json,
};
use serde::{Deserialize, Serialize};

#[derive(Serialize, Deserialize)]
pub struct User {
    pub id: String,
    pub username: String,
    pub email: String,
}

pub async fn get_users(
    State(pool): State<Pool>,
) -> Result<Json<Vec<User>>, StatusCode> {
    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—
    // ...
    Ok(Json(users))
}
```

### **Phase 4D: èªè¨¼ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…**

#### **Step 1: JWTèªè¨¼å®Ÿè£…**
```rust
// src/services/auth_service.rs
use jsonwebtoken::{decode, encode, DecodingKey, EncodingKey, Header, Validation};
use serde::{Deserialize, Serialize};

#[derive(Debug, Serialize, Deserialize)]
pub struct Claims {
    pub sub: String, // user_id
    pub exp: usize,  // expiration
}

pub fn create_token(user_id: &str) -> Result<String, Box<dyn std::error::Error>> {
    let expiration = chrono::Utc::now()
        .checked_add_signed(chrono::Duration::hours(24))
        .expect("valid timestamp")
        .timestamp() as usize;

    let claims = Claims {
        sub: user_id.to_string(),
        exp: expiration,
    };

    encode(
        &Header::default(),
        &claims,
        &EncodingKey::from_secret(std::env::var("JWT_SECRET").unwrap().as_ref()),
    )
    .map_err(|e| e.into())
}
```

#### **Step 2: Clerké€£æºå®Ÿè£…**
```rust
// src/services/clerk_service.rs
use reqwest::Client;
use serde::{Deserialize, Serialize};

#[derive(Debug, Serialize, Deserialize)]
pub struct ClerkUser {
    pub id: String,
    pub email: String,
    pub username: Option<String>,
}

pub async fn verify_clerk_token(token: &str) -> Result<ClerkUser, Box<dyn std::error::Error>> {
    let client = Client::new();
    let response = client
        .get("https://api.clerk.dev/v1/me")
        .header("Authorization", format!("Bearer {}", token))
        .send()
        .await?;

    let user: ClerkUser = response.json().await?;
    Ok(user)
}
```

---

## ğŸ¯ **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯æ¦‚è¦**

### **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆç¶­æŒï¼‰**
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 15 (App Router) + React 19 + TypeScript
- **UI**: Material-UI (MUI) + Tailwind CSS
- **çŠ¶æ…‹ç®¡ç†**: Redux Toolkit + RTK Query
- **ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³**: Rust + WebAssembly

### **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆRustæ§‹ç¯‰ï¼‰**
- **Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Axum/Actix-web/Poem
- **ORM**: Diesel/SeaORM/sqlx
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL (Docker) + Redis
- **èªè¨¼**: Rust JWTã‚¯ãƒ¬ãƒ¼ãƒˆ + Clerké€£æº
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡**: WebSocketï¼ˆtokio-tungsteniteï¼‰

### **ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤**
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Vercel
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: AWS ECS/Fargateç­‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: AWS RDS
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: Upstash Redis
- **CI/CD**: GitHub Actions

---

## ğŸ“Š **ç§»è¡Œé€²æ—ç®¡ç†**

### **å®Œäº†æ¸ˆã¿ï¼ˆâœ…ï¼‰**
- [x] Next.js 15 + React 19 ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [x] Material-UI + TypeScript çµ±åˆ
- [x] Redux Toolkit çŠ¶æ…‹ç®¡ç†
- [x] åŸºæœ¬çš„ãªã‚²ãƒ¼ãƒ æ©Ÿèƒ½å®Ÿè£…
- [x] rust-game-engineãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- [x] WebAssemblyå¯¾å¿œè¨­å®š
- [x] SRSå›è»¢ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- [x] ã‚¹ãƒ”ãƒ³æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- [x] WASMçµ±åˆå®Œäº†
- [x] ãƒ•ã‚£ãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰å®Ÿè£…
- [x] å®Ÿç¸¾ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- [x] ãƒã‚¤ãƒ³ãƒˆäº¤æ›ã‚·ã‚¹ãƒ†ãƒ 
- [x] ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚·ã‚¹ãƒ†ãƒ 
- [x] Dockerç’°å¢ƒæ§‹ç¯‰ï¼ˆPostgreSQL + Redisï¼‰
- [x] Prismaã‚¹ã‚­ãƒ¼ãƒå®šç¾©ãƒ»é©ç”¨
- [x] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ï¼ˆSeedï¼‰

### **é€²è¡Œä¸­ï¼ˆğŸ”„ï¼‰**
- [ ] Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤æ§‹ç¯‰
- [ ] ORMè¨­å®šï¼ˆDiesel/SeaORMï¼‰
- [ ] åŸºæœ¬çš„ãªAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…

### **æœªç€æ‰‹ï¼ˆâ³ï¼‰**
- [ ] JWTèªè¨¼ã®Rustå®Ÿè£…
- [ ] Clerké€£æºã®å®Ÿè£…
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰çµ±åˆ
- [ ] RTK Queryçµ±åˆ
- [ ] WebSocket/Socket.ioå®Ÿè£…
- [ ] ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ©Ÿèƒ½
- [ ] ãƒãƒƒãƒãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 
- [ ] ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
- [ ] ãƒªãƒ—ãƒ¬ã‚¤ã‚·ã‚¹ãƒ†ãƒ 
- [ ] ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
- [ ] ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

---

## ğŸš€ **æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**

### **Phase 4C: Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤æ§‹ç¯‰ï¼ˆç¾åœ¨é€²è¡Œä¸­ï¼‰**
1. **Rustãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ**
   - Cargo.tomlè¨­å®š
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ
   - ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ»ORMè¨­å®š**
   - Diesel/SeaORMè¨­å®š
   - æ¥ç¶šãƒ—ãƒ¼ãƒ«è¨­å®š
   - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š

3. **åŸºæœ¬çš„ãªAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†API
   - ã‚¹ã‚³ã‚¢ç®¡ç†API
   - å®Ÿç¸¾ç®¡ç†API

### **Phase 4D: èªè¨¼ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…ï¼ˆäºˆå®šï¼‰**
1. **JWTèªè¨¼ã®Rustå®Ÿè£…**
2. **Clerké€£æºã®å®Ÿè£…**
3. **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**

### **Phase 5: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰çµ±åˆï¼ˆäºˆå®šï¼‰**
1. **APIé€šä¿¡å®Ÿè£…**
2. **RTK Queryçµ±åˆ**
3. **å‹å®‰å…¨æ€§ç¢ºä¿**

---

## ğŸ› ï¸ **é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

### **å‰ææ¡ä»¶**
```bash
# Node.js 20ä»¥ä¸Š
node --version

# Docker & Docker Compose
docker --version
docker-compose --version

# Rust
rustc --version
cargo --version

# WASM
wasm-pack --version
```

### **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç’°å¢ƒï¼ˆç¾åœ¨ç¨¼åƒä¸­ï¼‰**
```bash
# PostgreSQL + Redis èµ·å‹•
cd modern-tetris
docker-compose up -d

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šç¢ºèª
psql -h localhost -U tetris_user -d tetris_dev
redis-cli ping
```

### **Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ç’°å¢ƒ**
```bash
# Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
cd ..
cargo new rust-backend
cd rust-backend

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cargo build

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
cargo run

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
cargo test
```

### **Next.jsç’°å¢ƒï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰**
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•
cd modern-tetris

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test
```

## ğŸ”§ **ç’°å¢ƒå¤‰æ•°è¨­å®š**

### **Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (.env)**
```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
DATABASE_URL="postgresql://tetris_user:tetris_password@localhost:5432/tetris_dev"
REDIS_URL="redis://localhost:6379"

# èªè¨¼
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"

# Clerk
CLERK_SECRET_KEY="your-clerk-secret"

# ã‚µãƒ¼ãƒãƒ¼è¨­å®š
RUST_LOG="info"
PORT="8080"
```

### **Next.jsãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (.env)**
```bash
# APIæ¥ç¶š
NEXT_PUBLIC_API_URL="http://localhost:8080"

# Clerk
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="your-clerk-key"

# Next.js
NEXTAUTH_URL="http://localhost:3000"
NODE_ENV="development"
```

---

## ğŸš€ **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™**

### **Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ç›®æ¨™**
- **APIå¿œç­”æ™‚é–“**: <50ms
- **åŒæ™‚æ¥ç¶šæ•°**: 1000+ï¼ˆWebSocketï¼‰
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: <100MB
- **ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ**: 10000+ req/sec

### **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç›®æ¨™ï¼ˆç¶­æŒï¼‰**
- **FPS**: 60 FPSï¼ˆWASMçµ±åˆå¾Œï¼‰
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: 30-50MBï¼ˆWASMçµ±åˆå¾Œï¼‰
- **åˆæœŸåŒ–æ™‚é–“**: 1-2ç§’ï¼ˆWASMçµ±åˆå¾Œï¼‰
- **å…¥åŠ›é…å»¶**: <16msï¼ˆWASMçµ±åˆå¾Œï¼‰

---

## ğŸ”§ **å“è³ªä¿è¨¼**

### **ãƒ†ã‚¹ãƒˆæˆ¦ç•¥**
1. **å˜ä½“ãƒ†ã‚¹ãƒˆ**: å„Rustãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
2. **çµ±åˆãƒ†ã‚¹ãƒˆ**: APIãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆ
3. **E2Eãƒ†ã‚¹ãƒˆ**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰çµ±åˆ
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**: ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ¸¬å®š

### **ã‚³ãƒ¼ãƒ‰å“è³ª**
1. **å‹å®‰å…¨æ€§**: 100% TypeScript + Rustå‹ãƒã‚§ãƒƒã‚¯
2. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: åŒ…æ‹¬çš„ãªã‚¨ãƒ©ãƒ¼å‡¦ç†
3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: è©³ç´°ãªAPIä»•æ§˜æ›¸
4. **ã‚³ãƒ¡ãƒ³ãƒˆ**: è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã®èª¬æ˜

---

## ğŸ“ˆ **ãƒªã‚¹ã‚¯ç®¡ç†**

### **æŠ€è¡“çš„ãƒªã‚¹ã‚¯**
- **Rustå­¦ç¿’ã‚³ã‚¹ãƒˆ**: ãƒãƒ¼ãƒ ã®ç¿’ç†Ÿåº¦å‘ä¸ŠãŒå¿…è¦
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰çµ±åˆ**: å‹å…±æœ‰ãƒ»é€šä¿¡è¨­è¨ˆ
- **ãƒ‡ãƒ—ãƒ­ã‚¤è¤‡é›‘åŒ–**: è¤‡æ•°ã‚µãƒ¼ãƒ“ã‚¹ã®ç®¡ç†

### **å¯¾ç­–**
- **æ®µéšçš„å®Ÿè£…**: æ©Ÿèƒ½ã”ã¨ã«é †æ¬¡å®Ÿè£…
- **ãƒ†ã‚¹ãƒˆé§†å‹•**: å„æ®µéšã§ã®å‹•ä½œç¢ºèª
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™**: è¨­è¨ˆãƒ»å®Ÿè£…ã®è¨˜éŒ²

---

## ğŸ¯ **æˆåŠŸæŒ‡æ¨™**

### **æŠ€è¡“æŒ‡æ¨™**
- [x] 60FPSã§ã®å®‰å®šå‹•ä½œï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰
- [x] ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡50MBä»¥ä¸‹ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰
- [x] åˆæœŸåŒ–æ™‚é–“2ç§’ä»¥ä¸‹ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰
- [x] å…¥åŠ›é…å»¶16msä»¥ä¸‹ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰
- [ ] APIå¿œç­”æ™‚é–“50msä»¥ä¸‹ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰
- [ ] åŒæ™‚æ¥ç¶šæ•°1000+ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰

### **å“è³ªæŒ‡æ¨™**
- [ ] ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š
- [ ] å‹å®‰å…¨æ€§100%
- [ ] ã‚¨ãƒ©ãƒ¼ç‡0.1%ä»¥ä¸‹
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š

### **é–‹ç™ºåŠ¹ç‡æŒ‡æ¨™**
- [ ] ãƒ“ãƒ«ãƒ‰æ™‚é–“30ç§’ä»¥ä¸‹
- [ ] ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰1ç§’ä»¥ä¸‹
- [ ] ãƒ‡ãƒãƒƒã‚°æ™‚é–“50%å‰Šæ¸›
- [ ] ã‚³ãƒ¼ãƒ‰ä¿å®ˆæ€§å‘ä¸Š

---

## ğŸ“š **å‚è€ƒè³‡æ–™**

### **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ**
- `doc/architecture/rust_backend_architecture.md` - Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¨­è¨ˆ
- `doc/architecture/architecture_diff.md` - å¤‰æ›´å·®åˆ†

### **æŠ€è¡“é¸å®š**
- `doc/adr/` - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®šè¨˜éŒ²ï¼ˆADRï¼‰

### **å®Ÿè£…è©³ç´°**
- `doc/files/phase4b.md` - Phase 4Bå®Ÿè£…å†…å®¹
- `log/rust-migration/` - Rustç§»è¡Œãƒ­ã‚°

ã“ã®ç§»è¡Œè¨ˆç”»ã«ã‚ˆã‚Šã€**Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’æœ€åˆã‹ã‚‰æ§‹ç¯‰**ã—ã€**æœ€é«˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**ã¨**é–‹ç™ºåŠ¹ç‡**ã‚’ä¸¡ç«‹ã—ãŸãƒ¢ãƒ€ãƒ³ãªãƒ†ãƒˆãƒªã‚¹ã‚²ãƒ¼ãƒ ãŒå®Œæˆã—ã¾ã™ã€‚ 